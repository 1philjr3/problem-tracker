# üî• –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase Firestore –¥–ª—è Problem Tracker

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –æ–±–ª–∞—á–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Firestore**

–í Firebase Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Firestore Database** ‚Üí **Rules** –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
      allow read: if request.auth != null; // –í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞
    }
    
    // –ü—Ä–æ–±–ª–µ–º—ã - –≤—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å, —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ
    match /problems/{problemId} {
      allow read: if request.auth != null;
      allow create: if request.auth != null && request.auth.uid == resource.data.authorId;
      allow update: if request.auth != null && 
        (request.auth.uid == resource.data.authorId || request.auth.token.email == 'admin@mail.ru');
    }
    
    // –ò—Å—Ç–æ—Ä–∏—è –±–∞–ª–ª–æ–≤ - —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
    match /pointsHistory/{historyId} {
      allow read: if request.auth != null;
      allow create: if request.auth != null;
    }
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ–∑–æ–Ω–∞ - —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å
    match /settings/{settingId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.token.email == 'admin@mail.ru';
    }
  }
}
```

### 2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Firestore**

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è `users`
```typescript
{
  id: string,           // UID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  email: string,        // Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  fullName: string,     // –§–ò–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  totalPoints: number,  // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤
  totalProblems: number,// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
  level: 'novice' | 'fighter' | 'master', // –£—Ä–æ–≤–µ–Ω—å
  joinedAt: string,     // –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (ISO)
  lastActive: string,   // –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (ISO)
  isAdmin?: boolean     // –§–ª–∞–≥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
}
```

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è `problems`
```typescript
{
  id: string,           // –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π ID
  title: string,        // –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
  description: string,  // –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
  category: string,     // –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–æ–±–ª–µ–º—ã
  authorId: string,     // UID –∞–≤—Ç–æ—Ä–∞
  authorName: string,   // –ò–º—è –∞–≤—Ç–æ—Ä–∞
  images: string[],     // –ú–∞—Å—Å–∏–≤ base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  points: number,       // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ –∑–∞ –ø—Ä–æ–±–ª–µ–º—É
  status: 'pending' | 'reviewed', // –°—Ç–∞—Ç—É—Å –ø—Ä–æ–±–ª–µ–º—ã
  reviewed: boolean,    // –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞ –ª–∏ –∞–¥–º–∏–Ω–æ–º
  reviewedAt?: string,  // –î–∞—Ç–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (ISO)
  reviewedBy?: string,  // UID –∞–¥–º–∏–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª
  createdAt: string,    // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (ISO)
  adminNotes?: string   // –ó–∞–º–µ—Ç–∫–∏ –∞–¥–º–∏–Ω–∞
}
```

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è `pointsHistory`
```typescript
{
  id: string,           // –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π ID
  userId: string,       // UID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  problemId: string,    // ID –ø—Ä–æ–±–ª–µ–º—ã
  points: number,       // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤
  reason: string,       // –ü—Ä–∏—á–∏–Ω–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
  createdAt: string,    // –î–∞—Ç–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è (ISO)
  adminId?: string      // UID –∞–¥–º–∏–Ω–∞ (–µ—Å–ª–∏ –±–æ–Ω—É—Å–Ω—ã–µ –±–∞–ª–ª—ã)
}
```

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è `settings`
```typescript
// –î–æ–∫—É–º–µ–Ω—Ç —Å ID 'current'
{
  currentSeason: string,    // –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–µ–∑–æ–Ω–∞
  seasonStartDate: string,  // –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å–µ–∑–æ–Ω–∞ (ISO)
  seasonEndDate: string,    // –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–µ–∑–æ–Ω–∞ (ISO)
  isActive: boolean,        // –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ —Å–µ–∑–æ–Ω
  lastBackup: string        // –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±–µ–∫–∞–ø–∞ (ISO)
}
```

### 3. **–ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**

–í Firebase Console ‚Üí **Firestore Database** ‚Üí **Indexes** —Å–æ–∑–¥–∞–π—Ç–µ —Å–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:

#### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ä–µ–π—Ç–∏–Ω–≥):
- –ö–æ–ª–ª–µ–∫—Ü–∏—è: `users`
- –ü–æ–ª—è: `totalPoints` (Descending), `__name__` (Ascending)

#### –î–ª—è –ø—Ä–æ–±–ª–µ–º (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ):
- –ö–æ–ª–ª–µ–∫—Ü–∏—è: `problems`
- –ü–æ–ª—è: `createdAt` (Descending), `__name__` (Ascending)

#### –î–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –±–∞–ª–ª–æ–≤:
- –ö–æ–ª–ª–µ–∫—Ü–∏—è: `pointsHistory`
- –ü–æ–ª—è: `createdAt` (Descending), `__name__` (Ascending)

### 4. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã**

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å email: **admin@mail.ru**

–ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–Ω—ã—Ö –±–∞–ª–ª–æ–≤ (1-10 –∑–∞ –ø—Ä–æ–±–ª–µ–º—É)
- ‚úÖ –û—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ–±–ª–µ–º –∫–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–µ–∑–æ–Ω–∞
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —Ä–µ–π—Ç–∏–Ω–≥–∞
- ‚úÖ –°–±—Ä–æ—Å –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–∞
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

### 5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

#### –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- ‚úÖ –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- ‚úÖ –í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ –∏ –ø—Ä–æ–±–ª–µ–º—ã

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- üìä **–ß—Ç–µ–Ω–∏–µ**: 50,000 –æ–ø–µ—Ä–∞—Ü–∏–π/–¥–µ–Ω—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- üìù **–ó–∞–ø–∏—Å—å**: 20,000 –æ–ø–µ—Ä–∞—Ü–∏–π/–¥–µ–Ω—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- üíæ **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: 1 –ì–ë (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

### 6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞**

#### –í Firebase Console –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:
- üìà **Usage**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏
- üîç **Logs**: –û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- üë• **Authentication**: –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- üíæ **Storage**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞

#### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log('–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', auth.currentUser);
console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Firestore:', db.app.name);
```

### 7. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**

–î–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
- üì¶ **–≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö** –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- üíæ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üîÑ **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±–µ–∫–∞–ø—ã** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω—Å–∫—É—é –ø–∞–Ω–µ–ª—å

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª –∏ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ –≤ –æ–±–ª–∞–∫–µ:

- ‚òÅÔ∏è **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≤—Å–µ–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- üèÜ **–û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥** –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- üë®‚Äçüíº **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∞
- üì± **–î–æ—Å—Ç—É–ø —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

### –°—Å—ã–ª–∫–∏:
- üîó **GitHub**: https://github.com/1philjr3/problem-tracker
- üî• **Firebase Console**: https://console.firebase.google.com
- üåê **–î–µ–ø–ª–æ–π –Ω–∞ Render**: —Å–º. DEPLOY.md 